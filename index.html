<!DOCTYPE html>

<html>
    <head>
        <title>Roadmap</title>
        <link rel="shortcut icon" type="image/png" href="images/favicon.png">
        <link rel="stylesheet" href='bower_components/normalize.css/normalize.css'/>
        <link rel="stylesheet" href='bower_components/font-awesome/css/font-awesome.css'/>
        <link rel="stylesheet" href='bower_components/pikaday/css/pikaday.css'/>
        <link rel="stylesheet" media="screen" href="stylesheets/main.css">

        <!-- Needed for google api -->
        <script type="text/javascript" src="//apis.google.com/js/client.js"></script>

    </head>
    <body class="ng-cloak" session-aware>
        <div class="chooser" ng-controller="CalendarChooser">
            <div id="chooser" class="calendar-chooser" ng-hide="calendar">
				<ul class="calendar-list" >
					<li ng-repeat="calendar in list" class="calendar" ng-click="choose(calendar)">{{calendar.summary}}</li>
				</ul>
			</div>
        </div>
		<div class="ProjectEditor" ng-controller="ProjectEditor" ng-show="project">
			<h4>Edit project</h4>
			<div>name : <input type="text" ng-model="project.name"></div>
			<div>Period : 
				<span class="clickable" pikaday="project.start">{{project.start.format("DD/MM/YYYY")}}</span>
				<i class="fa fa-long-arrow-right"></i> 
				<span class="clickable" pikaday="project.end">{{project.end.format("DD/MM/YYYY")}}</span>
			</div>
            <div>Atttendees<br>
				<input type="text" ng-model="attendee"><i class="fa fa-plus clickable" ng-click="addAttendee()"></i><br>
                <span ng-repeat="a in project.attendees" class="Project-Attendee ">{{a.email}}
                    <i class="fa fa-remove clickable" ng-click="removeAttendee(a)"></i></span>
            </div>
			<div class="ProjectEditor-Button">
				<button class="pull-left" ng-click="delete()" ng-disabled="progress" ng-if="project.id">Delete</button>
				<button class="pull-right" ng-click="save()" ng-disabled="progress">Apply</button>
				<button class="pull-right" ng-click="cancel()">Cancel</button>
			</div>
		</div>
		
        <div class="toolbar">
            <div class="toolbar-container" ng-controller="ProjectToolbar">
				<div id="project-toolbar">
					<i class="fa fa-refresh fa-lg pull-right clickable" ng-class="loading ? 'fa-spin' : ''" ng-show="calendar" ng-click="reload()"></i>
					<i class="fa fa-list-ul fa-lg clickable calendar-reset" ng-click="calendarReset()"></i>
					<span class="toolbar-separator"></span>
					<span class="clickable" ng-click="createProject()">Add a project</span>
					<span class="toolbar-separator"></span>
					<i class="fa fa-search-plus muted"></i>
					<span class="clickable" ng-click="zoomDays()" ng-class="isDaysScale()">Days</span>&nbsp;
					<span class="clickable" ng-click="zoomWeeks()" ng-class="isWeeksScale()">Weeks</span>&nbsp;
					<span class="clickable" ng-click="zoomMonths()" ng-class="isMonthsScale()">Months</span>&nbsp;
				</div>
			</div>
        </div>
        <div class="timebar" ng-controller="Timebar">
            <div id="time-bar">
            	<div class="clearfix">
            		<div class="TimeBar-Prev" ng-click="previousQuarter()"><i class="fa fa-backward"></i></div>
            		<div class="TimeBar-Next" ng-click="nextQuarter()"><i class="fa fa-forward"></i></div>
            	</div>
				<div class="TimeBar-Ticks clearfix">
					<div ng-repeat="month in months" class="TimeBar-Month month" ng-class="month.meta">{{month.label}}</div>
				</div>
            </div>
        </div>
        <div class="grid-content">
            {{deletePending}}
            <div id="project-list" ng-controller="ProjectList">
                <ul class="ProjectList">
					<li ng-repeat="project in projects track by project.id" class="Project" >
						<div class="Project-timebar" timebar="project"></div>
                        <i class="fa fa-exclamation-circle fa-fw muted" ng-show="deletePending[project.id]"></i>
                        <i class="fa fa-pencil fa-fw clickable" ng-click="editProject(project)" ng-hide="deletePending[project.id]"></i>
                        {{project.name}}
						<span style="color: #999; font-size: 0.8em">{{project.start.format("DD/MM/YYYY")}} 
							<i class="fa fa-long-arrow-right"></i> 
							{{project.end.format("DD/MM/YYYY")}}</span>
					</li>
				</ul>
            </div>
		</div>
        <div class="history" ng-controller="HistoryList" ng-show="history.length > 0">
			Last operations ...
            <ul >
				<li ng-repeat="data in history" ng-class="$first ? 'selected' : ''" >
					<span class="pull-right timestamp">{{data.timestamp.fromNow()}}</span>
					<i class="fa {{data.payload.actionType}} fa-fw"></i> {{data.payload.project.name}}
				</li>
			</ul>
			<button ng-disabled="progress" ng-click="undo()">Undo</button>
		</div>

        <div class="confirm" ng-controller="Confirm" ng-show="confirms.length > 0">
            Pending operations ....
            <ul >
                <li ng-repeat="c in confirms" >
                    <span class="pull-right timestamp">{{c.timestamp.fromNow()}}</span>
                    <i class="fa {{data.payload.actionType}}"></i>
                    {{c.payload.project.name}}
                    <button ng-click="confirm(c)">ok</button>
                    <button ng-click="cancel(c)">cancel</button>
                </li>
            </ul>
        </div>

		<script data-main="javascript/roadmap" src="bower_components/requirejs/require.js"></script>

		
    </body>
</html>

